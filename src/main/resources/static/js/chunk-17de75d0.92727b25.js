(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17de75d0"],{2003:function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{attrs:{id:"systemLog"}},[a("Card",{staticClass:"margin-top10"},[a("Form",{ref:"systemLogForm",attrs:{"label-position":"right","label-width":80,inline:""}},[a("FormItem",{staticClass:"float-right"},[a("Button",{attrs:{type:"info",loading:t.loading},on:{click:t.submit}},[t._v("提交")])],1)],1),a("hot-table",{ref:"hott",attrs:{settings:t.hotSettings,licenseKey:"non-commercial-and-evaluation"}})],1)],1)},o=[],i=a("c93e"),r=(a("456d"),a("7f7f"),a("9393")),c=(a("ac6a"),a("cadf"),a("551c"),a("097d"),a("3292")),s=a("3c78"),u=(a("1699"),a("250e"),a("c276")),d=a("c1df"),l=a.n(d),m=a("94f9"),f=a("b4c3"),h=a("534e"),p={name:"personnel",data:function(){var t=this;return{loading:!1,list:[],companyNum:"",hotSettings:{className:"htCenter htMiddle",minSpareRows:1,headerTooltips:{rows:!1,columns:!0,onlyTrimmed:!0},fixedRowsTop:0,data:[],width:"100%",height:"600",stretchH:"all",rowHeights:50,rowHeaders:!0,search:!0,language:"zh-CN",contextMenu:c["a"].contextOption,colHeaders:["武汉等高发疫区回蓉人数","隔离人数","疑似人数","确诊人数","死亡人数","填报单位","填报者姓名","填报日期","填报人电话","公司编号"],columns:[{data:"highBackCount",type:"numeric"},{data:"isolationCount",type:"numeric"},{data:"suspectCount",type:"numeric"},{data:"comfirmCount",type:"numeric"},{data:"deadCount",type:"numeric"},{data:"company"},{data:"editName"},{data:"editTime"},{data:"editTel"},{data:"companyNum"}],afterChange:function(n){n&&n.forEach(function(n){var a=Object(r["a"])(n,4),e=a[0],o=a[1],i=a[2],c=a[3];if("editTel"===o&&i!=c){if(!c)return;Object(m["b"])({tel:c}).then(function(n){var a=n.data;t.list&&0!==t.list.length&&a.data&&0!==a.data.length&&(t.list[e]["editName"]=a.data[0].name,t.list[e]["companyNum"]=a.data[0].companyNum),t.list[e]["editTime"]=l()().format("YYYY-MM-DD HH:mm"),t.$refs.hott.hotInstance.loadData(t.list)})}else t.list[e]["editTime"]=l()().format("YYYY-MM-DD HH:mm"),t.$refs.hott.hotInstance.loadData(t.list)})}}}},components:{HotTable:s["a"]},created:function(){this.companyNum=f["a"].fetchSession("companyNum")},mounted:function(){this._getTableData()},methods:{_getTableData:function(){var t=this,n={companyNum:this.companyNum,subFlag:0};Object(h["b"])(n).then(function(n){var a=n.data,e=a.code,o=a.data;e===c["a"].statusCode.SUCCESS&&o&&0!==o.length?(t.list=o,t.$refs.hott.hotInstance.loadData(t.list)):t.$refs.hott.hotInstance.loadData(t.list)}).catch(function(){t.$refs.hott.hotInstance.loadData(t.list)})},_normalizeWrapper:function(t){for(var n=this,a=[],e=t.filter(function(t){if(t&&0!==Object.keys(t).length)return t}),o=0;o<e.length;o++){var r=!1;for(var c in e[o])e[o][c]&&""!=e[o][c]&&(r=!0);r||e.splice(o,1)}e.map(function(t){a.push({highBackCount:t.highBackCount||0,isolationCount:t.isolationCount||0,suspectCount:t.suspectCount||"",comfirmCount:t.comfirmCount||0,deadCount:t.deadCount||0,company:t.company||"",editName:t.editName||"",editTime:t.editTime||"",editTel:t.editTel||""})});var s=a.map(function(t){return Object(i["a"])({},t,{companyNum:n.companyNum,entryTime:(new Date).getTime()})});return s},submit:function(){var t=this,n=Object(u["a"])(this.$refs.hott.hotInstance.getSourceData()),a=this._normalizeWrapper(n);if(a&&0===a.length)return this.$Modal.confirm({title:"是否保存此次操作？",onOk:function(){var n=[{companyNum:t.companyNum,delNum:t.companyNum}];Object(h["a"])(n).then(function(n){t.loading=!1;var a=n.data,e=(a.code,a.resultMsg);t.$Message.success(e)}).catch(function(){t.loading=!1})},onCancel:function(){t.loading=!1}});Object(h["a"])(a).then(function(n){t.loading=!1;var a=n.data,e=a.code,o=a.resultMsg;e===c["a"].statusCode.SUCCESS?(t.$Message.success("保存成功"),t._getTableData()):t.$Message.error(o)}).catch(function(){t.loading=!1})}}},g=p,y=(a("2419"),a("4d73"),a("2877")),b=Object(y["a"])(g,e,o,!1,null,null,null);b.options.__file="personnel.vue";n["default"]=b.exports},2217:function(t,n,a){},2419:function(t,n,a){"use strict";var e=a("3a01"),o=a.n(e);o.a},"3a01":function(t,n,a){},"4d73":function(t,n,a){"use strict";var e=a("2217"),o=a.n(e);o.a},"534e":function(t,n,a){"use strict";a.d(n,"a",function(){return r}),a.d(n,"b",function(){return c});var e=a("66df"),o=a("2938"),i=o["a"]+"api/ncp/high/",r=function(t){return e["a"].request({url:i+"add",method:"post",data:t})},c=function(t){return e["a"].request({url:i+"list",method:"post",data:t})}},9393:function(t,n,a){"use strict";function e(t){if(Array.isArray(t))return t}function o(t,n){var a=[],e=!0,o=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(e=(r=c.next()).done);e=!0)if(a.push(r.value),n&&a.length===n)break}catch(t){o=!0,i=t}finally{try{e||null==c["return"]||c["return"]()}finally{if(o)throw i}}return a}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,n){return e(t)||o(t,n)||i()}a.d(n,"a",function(){return r})},"94f9":function(t,n,a){"use strict";a.d(n,"a",function(){return r}),a.d(n,"b",function(){return c});var e=a("66df"),o=a("2938"),i=o["a"]+"api/base/",r=function(t){return e["a"].request({url:i+"add",method:"post",data:t})},c=function(t){return e["a"].request({url:i+"list",method:"post",data:t})}}}]);