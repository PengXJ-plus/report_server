(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25daaf2e"],{"15ce":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personController",attrs:{id:"systemLog"}},[a("Card",{staticClass:"margin-top10"},[a("Form",{ref:"systemLogForm",attrs:{"label-position":"right","label-width":80,inline:""}},[a("FormItem",{staticClass:"float-right"},[a("Button",{attrs:{type:"info"},on:{click:t.submit}},[t._v("提交")])],1)],1),a("hot-table",{ref:"hott",attrs:{settings:t.hotSettings,licenseKey:"non-commercial-and-evaluation"}})],1)],1)},o=[],i=(a("c5f6"),a("c93e")),s=(a("456d"),a("7f7f"),a("9393")),r=(a("ac6a"),a("cadf"),a("551c"),a("097d"),a("3292")),c=a("3c78"),u=(a("1699"),a("250e"),a("c276")),l=a("c1df"),d=a.n(l),m=a("94f9"),f=a("b4c3"),h=a("66df"),p=a("2938"),y=p["a"]+"api/ncp/",C=function(t){return h["a"].request({url:y+"add",method:"post",data:t})},g=function(t){return h["a"].request({url:y+"list",method:"post",data:t})},k={name:"Visitor",data:function(){var t=this;return{loading:!1,companyNum:"",hotSettings:{className:"htCenter htMiddle",minSpareRows:1,headerTooltips:{rows:!1,columns:!0,onlyTrimmed:!0},fixedRowsTop:0,data:[],width:"100%",height:"600",stretchH:"all",colWidths:140,rowHeights:50,rowHeaders:!0,search:!0,fillHandle:{direction:"vertical",autoInsertRow:!0},language:"zh-CN",contextMenu:r["a"].contextOption,colHeaders:["上班员工总人数","上班一线员工数","有无接待湖北来蓉游客定点酒店","酒店有无确诊新冠肺炎病人入住","防疫宣传次数","公共区域消毒次数","医疗检测点个数","值班值守人数","防疫共投入资金","已使用口罩","已使用手套","已使用温度计","已使用酒精","已使用消毒液","已使用防护服","库存口罩","库存手套","库存温度计","库存酒精","库存消毒液","库存防护服","需要集团解决的问题","填报单位","填报人姓名","填报时间","填报人电话","公司代号"],columns:[{data:"workCount",type:"numeric"},{data:"firstWorkCount",type:"numeric"},{data:"appointHotel",editor:"select",selectOptions:["有","无"]},{data:"hotelComfirm",editor:"select",selectOptions:["有","无"]},{data:"pubCount",type:"numeric"},{data:"disCount",type:"numeric"},{data:"checkPointCount",type:"numeric"},{data:"dutyCount",type:"numeric"},{data:"cost",type:"numeric"},{data:"usedMask",type:"numeric"},{data:"usedGlove",type:"numeric"},{data:"usedTher",type:"numeric"},{data:"usedAlcohol",type:"numeric"},{data:"usedDis",type:"numeric"},{data:"usedClothing",type:"numeric"},{data:"stockMask",type:"numeric"},{data:"stockGlove",type:"numeric"},{data:"stockTher",type:"numeric"},{data:"stockAlcohol",type:"numeric"},{data:"stockDis",type:"numeric"},{data:"stockClothing",type:"numeric"},{data:"needSolved"},{data:"company"},{data:"editName"},{data:"editTime"},{data:"editTel"},{data:"companyNum"}],afterChange:function(e){e&&e.forEach(function(e){var a=Object(s["a"])(e,4),n=a[0],o=a[1],i=a[2],r=a[3];if("editTel"===o&&i!=r){if(!r)return;Object(m["b"])({tel:r}).then(function(e){var a=e.data;t.list&&0!==t.list.length&&a.data&&0!==a.data.length&&(t.list[n]["editName"]=a.data[0].name,t.list[n]["editTel"]=a.data[0].tel,t.list[n]["companyNum"]=a.data[0].companyNum),t.list[n]["editTime"]=d()().format("YYYY-MM-DD HH:mm"),t.$refs.hott.hotInstance.loadData(t.list)})}else t.list[n]["editTime"]=d()().format("YYYY-MM-DD HH:mm"),t.$refs.hott.hotInstance.loadData(t.list)})}},list:[]}},components:{HotTable:c["a"]},created:function(){this.companyNum=f["a"].fetchSession("companyNum")},mounted:function(){this._getTableData()},methods:{_getTableData:function(){var t=this,e={companyNum:this.companyNum};g(e).then(function(e){var a=e.data;a.code===r["a"].statusCode.SUCCESS&&a.data&&0!==a.data.length?(t.list=a.data.map(function(e){return t._normalize(e)}),console.log(t.list),t.$refs.hott.hotInstance.loadData(t.list)):t.$refs.hott.hotInstance.loadData(t.list)})},_normalize:function(t){if(!t||0!==Object.keys(t).length){for(var e in t)"appointHotel"===e&&(t[e]=r["a"].constants.HOTEl[t[e]]),"hotelComfirm"===e&&(t[e]=r["a"].constants.COMFIRM[t[e]]);return t}},_normalizeWrapper:function(t){for(var e=this,a=[],n=t.filter(function(t){if(t&&0!==Object.keys(t).length)return t}),o=0;o<n.length;o++){var s=!1;for(var c in n[o])n[o][c]&&""!=n[o][c]&&(s=!0);s||n.splice(o,1)}n.map(function(t){a.push({company:t.company||"",editName:t.editName||"",editTel:t.editTel||"",workCount:t.workCount||0,firstWorkCount:t.firstWorkCount||0,appointHotel:t.appointHotel?r["a"].constants.HOTEl[t["appointHotel"]]:0,hotelComfirm:t.hotelComfirm?r["a"].constants.COMFIRM[t["hotelComfirm"]]:0,pubCount:t.pubCount||0,disCount:t.disCount||0,checkPointCount:t.checkPointCount||0,dutyCount:t.dutyCount||0,cost:t.cost||0,usedMask:t.usedMask||0,usedGlove:t.usedGlove||0,usedTher:t.usedTher||0,usedAlcohol:t.usedAlcohol||0,usedDis:t.usedDis||0,usedClothing:t.usedClothing||0,stockMask:t.stockMask||0,stockGlove:t.stockGlove||0,stockTher:t.stockTher||0,stockAlcohol:t.stockAlcohol||0,stockDis:t.stockDis||0,stockClothing:t.stockClothing||0,needSolved:t.needSolved||""})});var u=a.map(function(t){return Object(i["a"])({},t,{companyNum:Number(e.companyNum),entryTime:(new Date).getTime(),editTime:(new Date).getTime()})});return u},submit:function(){var t=this,e=Object(u["a"])(this.$refs.hott.hotInstance.getSourceData()),a=this._normalizeWrapper(e);if(a&&0===a.length)return this.$Modal.confirm({title:"是否保存此次操作？",onOk:function(){var e=[{companyNum:t.companyNum,delNum:t.companyNum}];C(e).then(function(e){var a=e.data,n=(a.code,a.resultMsg);t.$Message.success(n)})}});C(a).then(function(e){t.loading=!1;var a=e.data,n=a.code,o=a.resultMsg;n===r["a"].statusCode.SUCCESS?t.$Message.success("保存成功"):t.$Message.error(o)}).catch(function(){t.loading=!1})}}},v=k,b=(a("c0ec"),a("97f9"),a("2877")),T=Object(b["a"])(v,n,o,!1,null,null,null);T.options.__file="person-controller.vue";e["default"]=T.exports},"20b1":function(t,e,a){},"3ff9":function(t,e,a){},9393:function(t,e,a){"use strict";function n(t){if(Array.isArray(t))return t}function o(t,e){var a=[],n=!0,o=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done);n=!0)if(a.push(s.value),e&&a.length===e)break}catch(t){o=!0,i=t}finally{try{n||null==r["return"]||r["return"]()}finally{if(o)throw i}}return a}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){return n(t)||o(t,e)||i()}a.d(e,"a",function(){return s})},"94f9":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return r});var n=a("66df"),o=a("2938"),i=o["a"]+"api/base/",s=function(t){return n["a"].request({url:i+"add",method:"post",data:t})},r=function(t){return n["a"].request({url:i+"list",method:"post",data:t})}},"97f9":function(t,e,a){"use strict";var n=a("20b1"),o=a.n(n);o.a},c0ec:function(t,e,a){"use strict";var n=a("3ff9"),o=a.n(n);o.a}}]);