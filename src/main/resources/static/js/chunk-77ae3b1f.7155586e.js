(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77ae3b1f"],{2944:function(t,a,n){},"514c":function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"home",attrs:{id:"systemLog"}},[n("Card",{staticClass:"margin-top10"},[n("Form",{ref:"systemLogForm",attrs:{inline:"","label-position":"right","label-width":80,model:t.filtData}},[n("Form-item",{attrs:{label:"手机号："}},[n("Input",{attrs:{type:"text",placeholder:"请输入手机尾号后4位数",clearable:""},model:{value:t.filtData.tel,callback:function(a){t.$set(t.filtData,"tel",a)},expression:"filtData.tel"}})],1),n("Form-item",{staticClass:"btn-form-item"},[n("Button",{attrs:{type:"info",icon:"md-search"},on:{click:t.query}},[t._v("查询")])],1),n("Form-item",{staticClass:"btn-form-item"},[n("Button",{attrs:{type:"info"},on:{click:t.openModal}},[t._v("基础信息录入")])],1),n("Form-item",{staticClass:"float-right"},[n("Button",{attrs:{type:"info",loading:t.btnLoading},on:{click:t.submit}},[t._v("提交")])],1)],1),n("hot-table",{ref:"hott",attrs:{settings:t.hotSettings,licenseKey:"non-commercial-and-evaluation"}})],1),n("base-info",{ref:"baseInfo",on:{updateList:t.updateStaff}})],1)},o=[],s=(n("7f7f"),n("9393")),i=(n("ac6a"),n("cadf"),n("551c"),n("097d"),n("b4c3")),c=n("3292"),r=n("3c78"),l=(n("250e"),n("c1df")),u=n.n(l),d=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("Modal",{attrs:{title:"基础信息录入",id:"baseInfoModal",width:"80%"},model:{value:t.showModal,callback:function(a){t.showModal=a},expression:"showModal"}},[n("hot-table",{ref:"hotm",attrs:{settings:t.hotSetting,licenseKey:"non-commercial-and-evaluation"}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"info",loading:t.confirmLoading},on:{click:t.submit}},[t._v("保存")])],1)],1)},f=[],m=n("94f9"),h={name:"baseInfo",data:function(){return{showModal:!1,confirmLoading:!1,hotSetting:{className:"htCenter htMiddle",minSpareRows:1,headerTooltips:{rows:!1,columns:!0,onlyTrimmed:!0},fixedRowsTop:0,data:[],width:"100%",height:"600",stretchH:"all",colWidths:80,rowHeaders:!0,colHeaders:["姓名","身份证号码","手机号码","目前居住地","14天内有无湖北等疫情高发地旅居历史","14天内有无与确诊病例、疑似病例接触史","本人及家人有无发热、干咳等疑似症状","部门名称"],columns:[{data:"name"},{data:"idCard"},{data:"tel"},{data:"address"},{data:"contactHb",editor:"select",selectOptions:["无","有"]},{data:"contact",editor:"select",selectOptions:["无","有"]},{data:"familyHealth",editor:"select",selectOptions:["无","有"]},{data:"depart"}],language:"zh-CN",contextMenu:c["a"].contextOption,beforeChange:function(t){}},queryData:{name:null,tel:null,idCard:null,subFlag:0,personType:0,companyNum:i["a"].fetchSession("companyNum")}}},components:{HotTable:r["a"]},methods:{init:function(){var t=this;this.showModal=!0,window.setTimeout(function(){t._getList()},600)},submit:function(){var t=this,a=this.$refs.hotm.hotInstance.getSourceData(),n=[];n=a.map(function(t){var a={};for(var n in t)a[n]=t[n];return a}).filter(function(a){a["familyHealth"]=c["a"].constants.FAMILYHEALTH[a["familyHealth"]],a["contactHb"]=c["a"].constants.CONTACTHB[a["contactHb"]],a["contact"]=c["a"].constants.CONTACT[a["contact"]];var n=!1;return t.hotSetting.columns.forEach(function(t){null!==a[t.data]&&void 0!==a[t.data]&&""!==a[t.data]&&(n=!0)}),n}).map(function(t){return t["companyNum"]=i["a"].fetchSession("companyNum"),t}),this.confirmLoading=!0,0===n.length&&(n=[{delNum:1,companyNum:i["a"].fetchSession("companyNum")}]),Object(m["a"])(n).then(function(a){t.confirmLoading=!1,0===a.data.code&&(t.$Message.success("操作成功！"),t.showModal=!1,t.$emit("updateList"))}).catch(function(){t.confirmLoading=!1})},_getList:function(){var t=this,a=this.queryData,n=a.name,e=a.tel,o=a.idCard,s=a.subFlag,i=a.companyNum,r=a.personType;Object(m["b"])({name:n,tel:e,idCard:o,subFlag:s,companyNum:i,personType:r}).then(function(a){var n=a.data.data;t.list=n.map(function(t){return t["familyHealth"]=c["a"].constants.FAMILYHEALTH[t["familyHealth"]],t["contactHb"]=c["a"].constants.CONTACTHB[t["contactHb"]],t["contact"]=c["a"].constants.CONTACT[t["contact"]],t}),t.$nextTick(function(){t.$refs.hotm.hotInstance.loadData(t.list)})}).catch(function(t){console.log(t)})}}},p=h,b=n("2877"),g=Object(b["a"])(p,d,f,!1,null,null,null);g.options.__file="baseInfo.vue";var y=g.exports,H=n("66df"),T=n("2938"),v=T["a"]+"api/staff/",C=function(t){return H["a"].request({url:v+"add",method:"post",data:t})},w=function(t){return H["a"].request({url:v+"list",method:"post",data:t})},N={name:"Staff",data:function(){var t=this;return{btnLoading:!1,hotSettings:{className:"htCenter htMiddle",minSpareRows:1,headerTooltips:{rows:!1,columns:!0,onlyTrimmed:!0},fixedRowsTop:0,data:[],width:"100%",height:"600",stretchH:"all",colWidths:100,rowHeaders:!0,colHeaders:["姓名","身份证号码","手机号码","目前居住地","部门名称","体温","是否复工"],columns:[{data:"name"},{data:"idCard"},{data:"tel"},{data:"address"},{data:"depart"},{data:"temp",editor:"select",selectOptions:["正常","异常"]},{data:"reworkFlag",editor:"select",selectOptions:["否","是"]}],language:"zh-CN",contextMenu:c["a"].contextOption,beforeChange:function(t){},afterChange:function(a){a&&a.forEach(function(a){var n=Object(s["a"])(a,4),e=n[0],o=n[1],r=n[2],l=n[3];"tel"===o&&r!=l&&l&&Object(m["b"])({tel:l,personType:0,companyNum:i["a"].fetchSession("companyNum"),subFlag:0}).then(function(a){var n=a.data.data;n.length>0&&(t.list[e].idCard=n[0].idCard,t.list[e].name=n[0].name,t.list[e].company=n[0].company,t.list[e].address=n[0].address,t.list[e].contact=c["a"].constants.CONTACT[n[0].contact],t.list[e].contactHb=c["a"].constants.CONTACTHB[n[0].contactHb],t.list[e].familyHealth=c["a"].constants.FAMILYHEALTH[n[0].familyHealth],t.list[e].temp="正常",t.list[e].reworkFlag="是",t.$refs.hott.hotInstance.loadData(t.list))})})}},list:[],filtData:{tel:null},queryData:{name:null,tel:null,idCard:null,subFlag:0,companyNum:i["a"].fetchSession("companyNum")}}},components:{HotTable:r["a"],BaseInfo:y},created:function(){},methods:{query:function(){var t=this,a=[];a=this.filtData.tel?this.$refs.hott.hotInstance.getSourceData().filter(function(a){return a.tel&&a.tel.substr(-4)==t.filtData.tel}):this.list,this.$refs.hott.hotInstance.loadData(a)},submit:function(){var t=this,a=this.list,n=[];n=a.map(function(t){var a={};for(var n in t)a[n]=t[n];return a}).filter(function(a){a["temp"]=c["a"].constants.TEMP[a["temp"]],a["contactHb"]=c["a"].constants.CONTACTHB[a["contactHb"]],a["contact"]=c["a"].constants.CONTACT[a["contact"]],a["familyHealth"]=c["a"].constants.FAMILYHEALTH[a["familyHealth"]],a["reworkFlag"]=c["a"].constants.REWORKFLAG[a["reworkFlag"]];var n=!1;return t.hotSettings.columns.forEach(function(t){null!==a[t.data]&&void 0!==a[t.data]&&""!==a[t.data]&&(n=!0)}),n}).map(function(t){return t["companyNum"]=i["a"].fetchSession("companyNum"),t["entryTime"]=u()().format("YYYY-MM-DD"),t}),this.btnLoading=!0,0===n.length&&(n=[{delNum:1,companyNum:i["a"].fetchSession("companyNum")}]),C(n).then(function(a){t.btnLoading=!1,0===a.data.code&&t.$Message.success("操作成功！")}).catch(function(){t.btnLoading=!1})},openModal:function(){this.$refs.baseInfo.init()},_getList:function(){var t=this,a=this.queryData,n=a.name,e=a.tel,o=a.idCard,s=a.subFlag,i=a.companyNum;w({name:n,tel:e,idCard:o,subFlag:s,companyNum:i}).then(function(a){var n=a.data.data;t.list=n.map(function(t){return t["temp"]=c["a"].constants.TEMP[t["temp"]],t["contactHb"]=c["a"].constants.CONTACTHB[t["contactHb"]],t["contact"]=c["a"].constants.CONTACT[t["contact"]],t["familyHealth"]=c["a"].constants.FAMILYHEALTH[t["familyHealth"]],t["reworkFlag"]=c["a"].constants.REWORKFLAG[t["reworkFlag"]],t}),t.$nextTick(function(){t.$refs.hott.hotInstance.loadData(t.list)})}).catch(function(t){console.log(t)})},updateStaff:function(){}},mounted:function(){this._getList()}},L=N,F=(n("9b9c"),n("6661"),Object(b["a"])(L,e,o,!1,null,null,null));F.options.__file="staff.vue";a["default"]=F.exports},6661:function(t,a,n){"use strict";var e=n("2944"),o=n.n(e);o.a},9393:function(t,a,n){"use strict";function e(t){if(Array.isArray(t))return t}function o(t,a){var n=[],e=!0,o=!1,s=void 0;try{for(var i,c=t[Symbol.iterator]();!(e=(i=c.next()).done);e=!0)if(n.push(i.value),a&&n.length===a)break}catch(t){o=!0,s=t}finally{try{e||null==c["return"]||c["return"]()}finally{if(o)throw s}}return n}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(t,a){return e(t)||o(t,a)||s()}n.d(a,"a",function(){return i})},"94f9":function(t,a,n){"use strict";n.d(a,"a",function(){return i}),n.d(a,"b",function(){return c});var e=n("66df"),o=n("2938"),s=o["a"]+"api/base/",i=function(t){return e["a"].request({url:s+"add",method:"post",data:t})},c=function(t){return e["a"].request({url:s+"list",method:"post",data:t})}},"9b9c":function(t,a,n){"use strict";var e=n("fa3c"),o=n.n(e);o.a},fa3c:function(t,a,n){}}]);